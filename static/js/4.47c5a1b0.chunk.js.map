{"version":3,"sources":["components/OversizedPanel/index.js","assets/images/arrow-down-blue.svg","assets/images/arrow-down-grey.svg","components/AddressInputPanel/index.js","webpack:///./src/assets/images/dropup-blue.svg?5b09","webpack:///./src/assets/images/dropdown-blue.svg?f8bc","components/ContextualInfoNew/index.js","pages/Send/index.js"],"names":["Panel","styled","div","_templateObject","_ref","theme","concreteGray","PanelTop","_templateObject2","_ref2","PanelBottom","_templateObject3","_ref3","OversizedPanel","_ref4","hideTop","hideBottom","children","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","module","exports","__webpack_require__","p","InputPanel","flexColumnNoWrap","lighten","royalBlue","white","ContainerRow","error","salmonRed","mercuryGray","_ref5","InputContainer","LabelRow","_templateObject4","_ref6","flexRowNoWrap","_ref7","doveGray","LabelContainer","_templateObject5","InputRow","_templateObject6","_ref8","Input","input","_templateObject7","_ref9","_ref10","chaliceGray","AddressInputPanel","_ref11","title","_ref11$initialInput","initialInput","_ref11$onChange","onChange","_ref11$onError","onError","t","useTranslation","library","useWeb3Context","_useState","useState","_useState2","Object","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","setInput","debouncedInput","useDebounce","_useState3","address","undefined","name","_useState4","data","setData","_useState5","_useState6","setError","useEffect","stale","isAddress","lookupAddress","then","catch","resolveName","react__WEBPACK_IMPORTED_MODULE_2___default","type","autoComplete","autoCorrect","autoCapitalize","spellCheck","placeholder","event","target","value","checksummedInput","_extends","assign","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","react_default","d","stroke","dropup_blue_SvgDropupBlue","svgRef","props","width","height","viewBox","fill","ref","ForwardRef","forwardRef","dropdown_blue_extends","dropdown_blue_objectWithoutProperties","dropdown_blue_objectWithoutPropertiesLoose","dropdown_blue_ref2","dropdown_blue_SvgDropdownBlue","dropdown_blue_ForwardRef","SummaryWrapper","SummaryWrapperContainer","Details","ErrorSpan","span","isError","slippageWarning","highSlippageWarning","css","transparentize","warningYellow","ColoredDropup","rest","objectWithoutProperties","_templateObject8","ColoredDropdown","_templateObject9","_ref12","_templateObject10","ContextualInfo","_ref13","_ref13$openDetailsTex","openDetailsText","_ref13$closeDetailsTe","closeDetailsText","_ref13$contextualInfo","contextualInfo","_ref13$allowExpand","allowExpand","_ref13$renderTransact","renderTransactionDetails","_ref13$isError","slicedToArray","showDetails","setShowDetails","Fragment","onClick","s","role","aria-label","INPUT","OUTPUT","ETH_TO_TOKEN","TOKEN_TO_ETH","TOKEN_TO_TOKEN","ALLOWED_SLIPPAGE","ethers","utils","bigNumberify","TOKEN_ALLOWED_SLIPPAGE","DEADLINE_FROM_NOW","GAS_MARGIN","BlueSpan","DownArrowBackground","DownArrow","img","clickable","LastSummaryText","ExchangeRateWrapper","ExchangeRate","Flex","calculateEtherTokenOutputFromInput","inputAmount","inputReserve","outputReserve","inputAmountWithFee","mul","numerator","denominator","add","calculateEtherTokenInputFromOutput","outputAmount","sub","constants","One","initialSwapState","independentValue","dependentValue","independentField","inputCurrency","outputCurrency","swapStateReducer","state","action","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_4__","_action$payload","payload","field","currency","newInputCurrency","newOutputCurrency","_action$payload2","getExchangeRate","inputValue","inputDecimals","outputValue","outputDecimals","invert","factor","pow","_unused","Swap","account","addTransaction","useTransactionAdder","ReactGA","pageview","window","location","pathname","search","_useReducer","useReducer","_useReducer2","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","swapState","dispatchSwapState","recipient","setRecipient","recipientError","setRecipientError","swapType","getSwapType","_useTokenDetails","useTokenDetails","inputSymbol","symbol","decimals","inputExchangeAddress","exchangeAddress","_useTokenDetails2","outputSymbol","outputExchangeAddress","inputExchangeContract","useExchangeContract","outputExchangeContract","contract","inputAllowance","useAddressAllowance","_useExchangeReserves","useExchangeReserves","inputReserveETH","reserveETH","inputReserveToken","reserveToken","_useExchangeReserves2","outputReserveETH","outputReserveToken","inputBalance","useAddressBalance","outputBalance","inputBalanceFormatted","Number","isInteger","amountFormatter","Math","min","outputBalanceFormatted","independentDecimals","dependentDecimals","independentValueParsed","setIndependentValueParsed","dependentValueFormatted","inputValueParsed","inputValueFormatted","outputValueParsed","outputValueFormatted","_useState7","_useState8","independentError","setIndependentError","parsedValue","parseUnits","lte","Zero","gte","MaxUint256","Error","_unused3","_calculateSlippageBou","token","offset","minimum","maximum","lt","gt","calculateSlippageBounds","dependentValueMinumum","dependentValueMaximum","_useState9","_useState10","inputError","setInputError","_useState11","_useState12","showUnlock","setShowUnlock","inputValueCalculation","amount","calculatedDependentValue","_unused4","_unused5","reserveETHFirst","reserveTokenFirst","reserveETHSecond","reserveTokenSecond","intermediateValue","_unused6","_useState13","_useState14","inverted","setInverted","exchangeRate","exchangeRateInverted","marketRate","firstRate","secondRate","_unused2","getMarketRate","percentSlippage","abs","percentSlippageFormatted","parseEther","isValid","estimatedText","concat","formatBalance","category","b","text","react__WEBPACK_IMPORTED_MODULE_6___default","_onSwap","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","deadline","estimate","method","args","estimatedGasLimit","wrap","_context","prev","next","ceil","Date","now","ethToTokenTransferInput","tokenToEthTransferInput","tokenToTokenTransferInput","ethToTokenTransferOutput","tokenToEthTransferOutput","tokenToTokenTransferOutput","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","sent","gasLimit","calculateGasMargin","response","stop","_components_CurrencyInputPanel__WEBPACK_IMPORTED_MODULE_13__","description","extraText","extraTextClickHander","valueToSet","onCurrencySelected","onValueChange","selectedTokens","selectedTokenAddress","errorMessage","_components_OversizedPanel__WEBPACK_IMPORTED_MODULE_15__","alt","src","ArrowDownBlue","ArrowDownGrey","disableUnlock","_components_AddressInputPanel__WEBPACK_IMPORTED_MODULE_16__","slippageWarningText","_components_ContextualInfoNew__WEBPACK_IMPORTED_MODULE_14__","renderSummary","_theme__WEBPACK_IMPORTED_MODULE_12__","disabled","warning"],"mappings":"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","file":"static/js/4.47c5a1b0.chunk.js","sourcesContent":["import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Panel = styled.div`\r\n  position: relative;\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n  width: calc(100% - 1rem);\r\n  margin: 0 auto;\r\n  border-radius: 0.625rem;\r\n`\r\n\r\nconst PanelTop = styled.div`\r\n  content: '';\r\n  position: absolute;\r\n  top: -0.5rem;\r\n  left: 0;\r\n  height: 1rem;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n`\r\n\r\nconst PanelBottom = styled.div`\r\n  position: absolute;\r\n  top: 80%;\r\n  left: 0;\r\n  height: 1rem;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n`\r\n\r\nexport default function OversizedPanel({ hideTop, hideBottom, children }) {\r\n  return (\r\n    <Panel>\r\n      {hideTop || <PanelTop />}\r\n      {children}\r\n      {hideBottom || <PanelBottom />}\r\n    </Panel>\r\n  )\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/arrow-down-blue.114fab91.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-down-grey.4d4a6a99.svg\";","import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useWeb3Context } from 'web3-react'\r\nimport { lighten } from 'polished'\r\n\r\nimport { isAddress } from '../../utils'\r\nimport { useDebounce } from '../../hooks'\r\n\r\nconst InputPanel = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap}\r\n  box-shadow: 0 4px 8px 0 ${({ theme }) => lighten(0.9, theme.royalBlue)};\r\n  position: relative;\r\n  border-radius: 1.25rem;\r\n  background-color: ${({ theme }) => theme.white};\r\n  z-index: 1;\r\n`\r\n\r\nconst ContainerRow = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 1.25rem;\r\n  box-shadow: 0 0 0 0.5px ${({ error, theme }) => (error ? theme.salmonRed : theme.mercuryGray)};\r\n  background-color: ${({ theme }) => theme.white};\r\n  transition: box-shadow 200ms ease-in-out;\r\n`\r\n\r\nconst InputContainer = styled.div`\r\n  flex: 1;\r\n`\r\n\r\nconst LabelRow = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.doveGray};\r\n  font-size: 0.75rem;\r\n  line-height: 1rem;\r\n  padding: 0.75rem 1rem;\r\n`\r\n\r\nconst LabelContainer = styled.div`\r\n  flex: 1 1 auto;\r\n  width: 0;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n`\r\n\r\nconst InputRow = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  align-items: center;\r\n  padding: 0.25rem 0.85rem 0.75rem;\r\n`\r\n\r\nconst Input = styled.input`\r\n  font-size: 1rem;\r\n  outline: none;\r\n  border: none;\r\n  flex: 1 1 auto;\r\n  width: 0;\r\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.royalBlue)};\r\n  transition: color 200ms ease-in-out;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n\r\n  ::placeholder {\r\n    color: ${({ theme }) => theme.chaliceGray};\r\n  }\r\n`\r\n\r\nexport default function AddressInputPanel({ title, initialInput = '', onChange = () => {}, onError = () => {} }) {\r\n  const { t } = useTranslation()\r\n\r\n  const { library } = useWeb3Context()\r\n\r\n  const [input, setInput] = useState(initialInput)\r\n  const debouncedInput = useDebounce(input, 150)\r\n\r\n  const [data, setData] = useState({ address: undefined, name: undefined })\r\n  const [error, setError] = useState(false)\r\n\r\n  // keep data and errors in sync\r\n  useEffect(() => {\r\n    onChange({ address: data.address, name: data.name })\r\n  }, [onChange, data.address, data.name])\r\n  useEffect(() => {\r\n    onError(error)\r\n  }, [onError, error])\r\n\r\n  // run parser on debounced input\r\n  useEffect(() => {\r\n    let stale = false\r\n\r\n    if (isAddress(debouncedInput)) {\r\n      library\r\n        .lookupAddress(debouncedInput)\r\n        .then(name => {\r\n          if (!stale) {\r\n            // if an ENS name exists, set it as the destination\r\n            if (name) {\r\n              setInput(name)\r\n            } else {\r\n              setData({ address: debouncedInput, name: '' })\r\n              setError(null)\r\n            }\r\n          }\r\n        })\r\n        .catch(() => {\r\n          setData({ address: debouncedInput, name: '' })\r\n          setError(null)\r\n        })\r\n    } else {\r\n      if (debouncedInput !== '') {\r\n        library\r\n          .resolveName(debouncedInput)\r\n          .then(address => {\r\n            if (!stale) {\r\n              // if the debounced input name resolves to an address\r\n              if (address) {\r\n                setData({ address: address, name: debouncedInput })\r\n                setError(null)\r\n              } else {\r\n                setError(true)\r\n              }\r\n            }\r\n          })\r\n          .catch(() => {\r\n            setError(true)\r\n          })\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      stale = true\r\n    }\r\n  }, [debouncedInput, library, onChange, onError])\r\n\r\n  function onInput(event) {\r\n    if (data.address !== undefined || data.name !== undefined) {\r\n      setData({ address: undefined, name: undefined })\r\n    }\r\n    if (error !== undefined) {\r\n      setError()\r\n    }\r\n    const input = event.target.value\r\n    const checksummedInput = isAddress(input)\r\n    setInput(checksummedInput || input)\r\n  }\r\n\r\n  return (\r\n    <InputPanel>\r\n      <ContainerRow error={input !== '' && error}>\r\n        <InputContainer>\r\n          <LabelRow>\r\n            <LabelContainer>\r\n              <span>{title || t('recipientAddress')}</span>\r\n            </LabelContainer>\r\n          </LabelRow>\r\n          <InputRow>\r\n            <Input\r\n              type=\"text\"\r\n              autoComplete=\"off\"\r\n              autoCorrect=\"off\"\r\n              autoCapitalize=\"off\"\r\n              spellCheck=\"false\"\r\n              placeholder=\"0x1234...\"\r\n              error={input !== '' && error}\r\n              onChange={onInput}\r\n              value={input}\r\n            />\r\n          </InputRow>\r\n        </InputContainer>\r\n      </ContainerRow>\r\n    </InputPanel>\r\n  )\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M11.4673 6L6.23364 1L0.999995 6\",\n  stroke: \"#388DFF\"\n});\n\nvar SvgDropupBlue = function SvgDropupBlue(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 7,\n    viewBox: \"0 0 12 7\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDropupBlue, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dropup-blue.345dad74.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0.97168 1L6.20532 6L11.439 1\",\n  stroke: \"#2F80ED\"\n});\n\nvar SvgDropdownBlue = function SvgDropdownBlue(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 7,\n    viewBox: \"0 0 12 7\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDropdownBlue, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dropdown-blue.80a3ae25.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport { transparentize } from 'polished'\r\n\r\nimport { ReactComponent as Dropup } from '../../assets/images/dropup-blue.svg'\r\nimport { ReactComponent as Dropdown } from '../../assets/images/dropdown-blue.svg'\r\n\r\nconst SummaryWrapper = styled.div`\r\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.doveGray)};\r\n  font-size: 0.75rem;\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n  padding-top: 1rem;\r\n`\r\n\r\nconst SummaryWrapperContainer = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  color: ${({ theme }) => theme.royalBlue};\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n  padding-top: 1rem;\r\n  cursor: pointer;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 0.75rem;\r\n\r\n  img {\r\n    height: 0.75rem;\r\n    width: 0.75rem;\r\n  }\r\n`\r\n\r\nconst Details = styled.div`\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n  padding: 1.5rem;\r\n  border-radius: 1rem;\r\n  font-size: 0.75rem;\r\n  margin-top: 1rem;\r\n`\r\n\r\nconst ErrorSpan = styled.span`\r\n  margin-right: 12px;\r\n  font-size: 0.75rem;\r\n  line-height: 0.75rem;\r\n\r\n  color: ${({ isError, theme }) => isError && theme.salmonRed};\r\n  ${({ slippageWarning, highSlippageWarning, theme }) =>\r\n    highSlippageWarning\r\n      ? css`\r\n          color: ${theme.salmonRed};\r\n          font-weight: 600;\r\n        `\r\n      : slippageWarning &&\r\n        css`\r\n          background-color: ${transparentize(0.6, theme.warningYellow)};\r\n          font-weight: 600;\r\n          padding: 0.25rem;\r\n        `}\r\n`\r\n\r\nconst WrappedDropup = ({ isError, highSlippageWarning, ...rest }) => <Dropup {...rest} />\r\nconst ColoredDropup = styled(WrappedDropup)`\r\n  path {\r\n    stroke: ${({ isError, theme }) => isError && theme.salmonRed};\r\n\r\n    ${({ highSlippageWarning, theme }) =>\r\n      highSlippageWarning &&\r\n      css`\r\n        stroke: ${theme.salmonRed};\r\n      `}\r\n  }\r\n`\r\n\r\nconst WrappedDropdown = ({ isError, highSlippageWarning, ...rest }) => <Dropdown {...rest} />\r\nconst ColoredDropdown = styled(WrappedDropdown)`\r\n  path {\r\n    stroke: ${({ isError, theme }) => isError && theme.salmonRed};\r\n\r\n    ${({ highSlippageWarning, theme }) =>\r\n      highSlippageWarning &&\r\n      css`\r\n        stroke: ${theme.salmonRed};\r\n      `}\r\n  }\r\n`\r\n\r\nexport default function ContextualInfo({\r\n  openDetailsText = 'Transaction Details',\r\n  closeDetailsText = 'Hide Details',\r\n  contextualInfo = '',\r\n  allowExpand = false,\r\n  renderTransactionDetails = () => {},\r\n  isError = false,\r\n  slippageWarning,\r\n  highSlippageWarning\r\n}) {\r\n  const [showDetails, setShowDetails] = useState(false)\r\n\r\n  return !allowExpand ? (\r\n    <SummaryWrapper>{contextualInfo}</SummaryWrapper>\r\n  ) : (\r\n    <>\r\n      <SummaryWrapperContainer onClick={() => setShowDetails(s => !s)}>\r\n        <>\r\n          <ErrorSpan isError={isError} slippageWarning={slippageWarning} highSlippageWarning={highSlippageWarning}>\r\n            {(slippageWarning || highSlippageWarning) && (\r\n              <span role=\"img\" aria-label=\"warning\">\r\n                ⚠️\r\n              </span>\r\n            )}\r\n            {contextualInfo ? contextualInfo : showDetails ? closeDetailsText : openDetailsText}\r\n          </ErrorSpan>\r\n          {showDetails ? (\r\n            <ColoredDropup isError={isError} highSlippageWarning={highSlippageWarning} />\r\n          ) : (\r\n            <ColoredDropdown isError={isError} highSlippageWarning={highSlippageWarning} />\r\n          )}\r\n        </>\r\n      </SummaryWrapperContainer>\r\n      {showDetails && <Details>{renderTransactionDetails()}</Details>}\r\n    </>\r\n  )\r\n}\r\n","import React, { useState, useReducer, useEffect } from 'react'\r\nimport ReactGA from 'react-ga'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useWeb3Context } from 'web3-react'\r\nimport { ethers } from 'ethers'\r\nimport styled from 'styled-components'\r\n\r\nimport { Button } from '../../theme'\r\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\r\nimport NewContextualInfo from '../../components/ContextualInfoNew'\r\nimport OversizedPanel from '../../components/OversizedPanel'\r\nimport AddressInputPanel from '../../components/AddressInputPanel'\r\nimport ArrowDownBlue from '../../assets/images/arrow-down-blue.svg'\r\nimport ArrowDownGrey from '../../assets/images/arrow-down-grey.svg'\r\nimport { isAddress, amountFormatter, calculateGasMargin } from '../../utils'\r\nimport { useExchangeContract } from '../../hooks'\r\nimport { useTokenDetails } from '../../contexts/Tokens'\r\nimport { useTransactionAdder } from '../../contexts/Transactions'\r\nimport { useAddressBalance, useExchangeReserves } from '../../contexts/Balances'\r\nimport { useAddressAllowance } from '../../contexts/Allowances'\r\n\r\nconst INPUT = 0\r\nconst OUTPUT = 1\r\n\r\nconst ETH_TO_TOKEN = 0\r\nconst TOKEN_TO_ETH = 1\r\nconst TOKEN_TO_TOKEN = 2\r\n\r\n// denominated in bips\r\nconst ALLOWED_SLIPPAGE = ethers.utils.bigNumberify(200)\r\nconst TOKEN_ALLOWED_SLIPPAGE = ethers.utils.bigNumberify(400)\r\n\r\n// denominated in seconds\r\nconst DEADLINE_FROM_NOW = 60 * 15\r\n\r\n// denominated in bips\r\nconst GAS_MARGIN = ethers.utils.bigNumberify(1000)\r\n\r\nconst BlueSpan = styled.span`\r\n  color: ${({ theme }) => theme.royalBlue};\r\n`\r\n\r\nconst DownArrowBackground = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst DownArrow = styled.img`\r\n  width: 0.625rem;\r\n  height: 0.625rem;\r\n  position: relative;\r\n  padding: 0.875rem;\r\n  cursor: ${({ clickable }) => clickable && 'pointer'};\r\n`\r\n\r\nconst LastSummaryText = styled.div`\r\n  margin-top: 1rem;\r\n`\r\n\r\nconst ExchangeRateWrapper = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.doveGray};\r\n  font-size: 0.75rem;\r\n  padding: 0.5rem 1rem;\r\n`\r\n\r\nconst ExchangeRate = styled.span`\r\n  flex: 1 1 auto;\r\n  width: 0;\r\n  color: ${({ theme }) => theme.chaliceGray};\r\n`\r\n\r\nconst Flex = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 2rem;\r\n\r\n  button {\r\n    max-width: 20rem;\r\n  }\r\n`\r\n\r\nfunction calculateSlippageBounds(value, token = false) {\r\n  if (value) {\r\n    const offset = value.mul(token ? TOKEN_ALLOWED_SLIPPAGE : ALLOWED_SLIPPAGE).div(ethers.utils.bigNumberify(10000))\r\n    const minimum = value.sub(offset)\r\n    const maximum = value.add(offset)\r\n    return {\r\n      minimum: minimum.lt(ethers.constants.Zero) ? ethers.constants.Zero : minimum,\r\n      maximum: maximum.gt(ethers.constants.MaxUint256) ? ethers.constants.MaxUint256 : maximum\r\n    }\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n\r\nfunction getSwapType(inputCurrency, outputCurrency) {\r\n  if (!inputCurrency || !outputCurrency) {\r\n    return null\r\n  } else if (inputCurrency === 'ETH') {\r\n    return ETH_TO_TOKEN\r\n  } else if (outputCurrency === 'ETH') {\r\n    return TOKEN_TO_ETH\r\n  } else {\r\n    return TOKEN_TO_TOKEN\r\n  }\r\n}\r\n\r\n// this mocks the getInputPrice function, and calculates the required output\r\nfunction calculateEtherTokenOutputFromInput(inputAmount, inputReserve, outputReserve) {\r\n  const inputAmountWithFee = inputAmount.mul(ethers.utils.bigNumberify(997))\r\n  const numerator = inputAmountWithFee.mul(outputReserve)\r\n  const denominator = inputReserve.mul(ethers.utils.bigNumberify(1000)).add(inputAmountWithFee)\r\n  return numerator.div(denominator)\r\n}\r\n\r\n// this mocks the getOutputPrice function, and calculates the required input\r\nfunction calculateEtherTokenInputFromOutput(outputAmount, inputReserve, outputReserve) {\r\n  const numerator = inputReserve.mul(outputAmount).mul(ethers.utils.bigNumberify(1000))\r\n  const denominator = outputReserve.sub(outputAmount).mul(ethers.utils.bigNumberify(997))\r\n  return numerator.div(denominator).add(ethers.constants.One)\r\n}\r\n\r\nconst initialSwapState = {\r\n  independentValue: '', // this is a user input\r\n  dependentValue: '', // this is a calculated number\r\n  independentField: INPUT,\r\n  inputCurrency: 'ETH',\r\n  outputCurrency: '0x763Fa6806e1acf68130D2D0f0df754C93cC546B2'\r\n}\r\n\r\nfunction swapStateReducer(state, action) {\r\n  switch (action.type) {\r\n    case 'FLIP_INDEPENDENT': {\r\n      const { independentField, inputCurrency, outputCurrency } = state\r\n      return {\r\n        ...state,\r\n        dependentValue: '',\r\n        independentField: independentField === INPUT ? OUTPUT : INPUT,\r\n        inputCurrency: outputCurrency,\r\n        outputCurrency: inputCurrency\r\n      }\r\n    }\r\n    case 'SELECT_CURRENCY': {\r\n      const { inputCurrency, outputCurrency } = state\r\n      const { field, currency } = action.payload\r\n\r\n      const newInputCurrency = field === INPUT ? currency : inputCurrency\r\n      const newOutputCurrency = field === OUTPUT ? currency : outputCurrency\r\n\r\n      if (newInputCurrency === newOutputCurrency) {\r\n        return {\r\n          ...state,\r\n          inputCurrency: field === INPUT ? currency : '',\r\n          outputCurrency: field === OUTPUT ? currency : ''\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          inputCurrency: newInputCurrency,\r\n          outputCurrency: newOutputCurrency\r\n        }\r\n      }\r\n    }\r\n    case 'UPDATE_INDEPENDENT': {\r\n      const { field, value } = action.payload\r\n      return {\r\n        ...state,\r\n        independentValue: value,\r\n        dependentValue: '',\r\n        independentField: field\r\n      }\r\n    }\r\n    case 'UPDATE_DEPENDENT': {\r\n      return {\r\n        ...state,\r\n        dependentValue: action.payload\r\n      }\r\n    }\r\n    default: {\r\n      return initialSwapState\r\n    }\r\n  }\r\n}\r\n\r\nfunction getExchangeRate(inputValue, inputDecimals, outputValue, outputDecimals, invert = false) {\r\n  try {\r\n    if (\r\n      inputValue &&\r\n      (inputDecimals || inputDecimals === 0) &&\r\n      outputValue &&\r\n      (outputDecimals || outputDecimals === 0)\r\n    ) {\r\n      const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\r\n\r\n      if (invert) {\r\n        return inputValue\r\n          .mul(factor)\r\n          .div(outputValue)\r\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\r\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\r\n      } else {\r\n        return outputValue\r\n          .mul(factor)\r\n          .div(inputValue)\r\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\r\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\r\n      }\r\n    }\r\n  } catch {}\r\n}\r\n\r\nfunction getMarketRate(\r\n  swapType,\r\n  inputReserveETH,\r\n  inputReserveToken,\r\n  inputDecimals,\r\n  outputReserveETH,\r\n  outputReserveToken,\r\n  outputDecimals,\r\n  invert = false\r\n) {\r\n  if (swapType === ETH_TO_TOKEN) {\r\n    return getExchangeRate(outputReserveETH, 18, outputReserveToken, outputDecimals, invert)\r\n  } else if (swapType === TOKEN_TO_ETH) {\r\n    return getExchangeRate(inputReserveToken, inputDecimals, inputReserveETH, 18, invert)\r\n  } else if (swapType === TOKEN_TO_TOKEN) {\r\n    const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\r\n    const firstRate = getExchangeRate(inputReserveToken, inputDecimals, inputReserveETH, 18)\r\n    const secondRate = getExchangeRate(outputReserveETH, 18, outputReserveToken, outputDecimals)\r\n    try {\r\n      return !!(firstRate && secondRate) ? firstRate.mul(secondRate).div(factor) : undefined\r\n    } catch {}\r\n  }\r\n}\r\n\r\nexport default function Swap() {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3Context()\r\n\r\n  const addTransaction = useTransactionAdder()\r\n\r\n  // analytics\r\n  useEffect(() => {\r\n    ReactGA.pageview(window.location.pathname + window.location.search)\r\n  }, [])\r\n\r\n  // core swap state\r\n  const [swapState, dispatchSwapState] = useReducer(swapStateReducer, initialSwapState)\r\n  const { independentValue, dependentValue, independentField, inputCurrency, outputCurrency } = swapState\r\n\r\n  const [recipient, setRecipient] = useState({ address: '', name: '' })\r\n  const [recipientError, setRecipientError] = useState()\r\n\r\n  // get swap type from the currency types\r\n  const swapType = getSwapType(inputCurrency, outputCurrency)\r\n\r\n  // get decimals and exchange addressfor each of the currency types\r\n  const { symbol: inputSymbol, decimals: inputDecimals, exchangeAddress: inputExchangeAddress } = useTokenDetails(\r\n    inputCurrency\r\n  )\r\n  const { symbol: outputSymbol, decimals: outputDecimals, exchangeAddress: outputExchangeAddress } = useTokenDetails(\r\n    outputCurrency\r\n  )\r\n\r\n  const inputExchangeContract = useExchangeContract(inputExchangeAddress)\r\n  const outputExchangeContract = useExchangeContract(outputExchangeAddress)\r\n  const contract = swapType === ETH_TO_TOKEN ? outputExchangeContract : inputExchangeContract\r\n\r\n  // get input allowance\r\n  const inputAllowance = useAddressAllowance(account, inputCurrency, inputExchangeAddress)\r\n\r\n  // fetch reserves for each of the currency types\r\n  const { reserveETH: inputReserveETH, reserveToken: inputReserveToken } = useExchangeReserves(inputCurrency)\r\n  const { reserveETH: outputReserveETH, reserveToken: outputReserveToken } = useExchangeReserves(outputCurrency)\r\n\r\n  // get balances for each of the currency types\r\n  const inputBalance = useAddressBalance(account, inputCurrency)\r\n  const outputBalance = useAddressBalance(account, outputCurrency)\r\n  const inputBalanceFormatted = !!(inputBalance && Number.isInteger(inputDecimals))\r\n    ? amountFormatter(inputBalance, inputDecimals, Math.min(4, inputDecimals))\r\n    : ''\r\n  const outputBalanceFormatted = !!(outputBalance && Number.isInteger(outputDecimals))\r\n    ? amountFormatter(outputBalance, outputDecimals, Math.min(4, outputDecimals))\r\n    : ''\r\n\r\n  // compute useful transforms of the data above\r\n  const independentDecimals = independentField === INPUT ? inputDecimals : outputDecimals\r\n  const dependentDecimals = independentField === OUTPUT ? inputDecimals : outputDecimals\r\n\r\n  // declare/get parsed and formatted versions of input/output values\r\n  const [independentValueParsed, setIndependentValueParsed] = useState()\r\n  const dependentValueFormatted = !!(dependentValue && dependentDecimals)\r\n    ? amountFormatter(dependentValue, dependentDecimals, Math.min(4, dependentDecimals), false)\r\n    : ''\r\n  const inputValueParsed = independentField === INPUT ? independentValueParsed : dependentValue\r\n  const inputValueFormatted = independentField === INPUT ? independentValue : dependentValueFormatted\r\n  const outputValueParsed = independentField === OUTPUT ? independentValueParsed : dependentValue\r\n  const outputValueFormatted = independentField === OUTPUT ? independentValue : dependentValueFormatted\r\n\r\n  // validate + parse independent value\r\n  const [independentError, setIndependentError] = useState()\r\n  useEffect(() => {\r\n    if (independentValue && independentDecimals) {\r\n      try {\r\n        const parsedValue = ethers.utils.parseUnits(independentValue, independentDecimals)\r\n\r\n        if (parsedValue.lte(ethers.constants.Zero) || parsedValue.gte(ethers.constants.MaxUint256)) {\r\n          throw Error()\r\n        } else {\r\n          setIndependentValueParsed(parsedValue)\r\n          setIndependentError(null)\r\n        }\r\n      } catch {\r\n        setIndependentError(t('inputNotValid'))\r\n      }\r\n\r\n      return () => {\r\n        setIndependentValueParsed()\r\n        setIndependentError()\r\n      }\r\n    }\r\n  }, [independentValue, independentDecimals, t])\r\n\r\n  // calculate slippage from target rate\r\n  const { minimum: dependentValueMinumum, maximum: dependentValueMaximum } = calculateSlippageBounds(\r\n    dependentValue,\r\n    swapType === TOKEN_TO_TOKEN\r\n  )\r\n\r\n  // validate input allowance + balance\r\n  const [inputError, setInputError] = useState()\r\n  const [showUnlock, setShowUnlock] = useState(false)\r\n  useEffect(() => {\r\n    const inputValueCalculation = independentField === INPUT ? independentValueParsed : dependentValueMaximum\r\n\r\n    if (inputBalance && (inputAllowance || inputCurrency === 'ETH') && inputValueCalculation) {\r\n      if (inputBalance.lt(inputValueCalculation)) {\r\n        setInputError(t('insufficientBalance'))\r\n      } else if (inputCurrency !== 'ETH' && inputAllowance.lt(inputValueCalculation)) {\r\n        setInputError(t('unlockTokenCont'))\r\n        setShowUnlock(true)\r\n      } else {\r\n        setInputError(null)\r\n        setShowUnlock(false)\r\n      }\r\n\r\n      return () => {\r\n        setInputError()\r\n        setShowUnlock(false)\r\n      }\r\n    }\r\n  }, [independentField, independentValueParsed, dependentValueMaximum, inputBalance, inputCurrency, inputAllowance, t])\r\n\r\n  // calculate dependent value\r\n  useEffect(() => {\r\n    const amount = independentValueParsed\r\n\r\n    if (swapType === ETH_TO_TOKEN) {\r\n      const reserveETH = outputReserveETH\r\n      const reserveToken = outputReserveToken\r\n\r\n      if (amount && reserveETH && reserveToken) {\r\n        try {\r\n          const calculatedDependentValue =\r\n            independentField === INPUT\r\n              ? calculateEtherTokenOutputFromInput(amount, reserveETH, reserveToken)\r\n              : calculateEtherTokenInputFromOutput(amount, reserveETH, reserveToken)\r\n\r\n          if (calculatedDependentValue.lte(ethers.constants.Zero)) {\r\n            throw Error()\r\n          }\r\n\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\r\n        } catch {\r\n          setIndependentError(t('insufficientLiquidity'))\r\n        }\r\n        return () => {\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\r\n        }\r\n      }\r\n    } else if (swapType === TOKEN_TO_ETH) {\r\n      const reserveETH = inputReserveETH\r\n      const reserveToken = inputReserveToken\r\n\r\n      if (amount && reserveETH && reserveToken) {\r\n        try {\r\n          const calculatedDependentValue =\r\n            independentField === INPUT\r\n              ? calculateEtherTokenOutputFromInput(amount, reserveToken, reserveETH)\r\n              : calculateEtherTokenInputFromOutput(amount, reserveToken, reserveETH)\r\n\r\n          if (calculatedDependentValue.lte(ethers.constants.Zero)) {\r\n            throw Error()\r\n          }\r\n\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\r\n        } catch {\r\n          setIndependentError(t('insufficientLiquidity'))\r\n        }\r\n        return () => {\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\r\n        }\r\n      }\r\n    } else if (swapType === TOKEN_TO_TOKEN) {\r\n      const reserveETHFirst = inputReserveETH\r\n      const reserveTokenFirst = inputReserveToken\r\n\r\n      const reserveETHSecond = outputReserveETH\r\n      const reserveTokenSecond = outputReserveToken\r\n\r\n      if (amount && reserveETHFirst && reserveTokenFirst && reserveETHSecond && reserveTokenSecond) {\r\n        try {\r\n          if (independentField === INPUT) {\r\n            const intermediateValue = calculateEtherTokenOutputFromInput(amount, reserveTokenFirst, reserveETHFirst)\r\n            if (intermediateValue.lte(ethers.constants.Zero)) {\r\n              throw Error()\r\n            }\r\n            const calculatedDependentValue = calculateEtherTokenOutputFromInput(\r\n              intermediateValue,\r\n              reserveETHSecond,\r\n              reserveTokenSecond\r\n            )\r\n            if (calculatedDependentValue.lte(ethers.constants.Zero)) {\r\n              throw Error()\r\n            }\r\n            dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\r\n          } else {\r\n            const intermediateValue = calculateEtherTokenInputFromOutput(amount, reserveETHSecond, reserveTokenSecond)\r\n            if (intermediateValue.lte(ethers.constants.Zero)) {\r\n              throw Error()\r\n            }\r\n            // console.log('hi!', amountFormatter(intermediateValue, ))\r\n            const calculatedDependentValue = calculateEtherTokenInputFromOutput(\r\n              intermediateValue,\r\n              reserveTokenFirst,\r\n              reserveETHFirst\r\n            )\r\n            if (calculatedDependentValue.lte(ethers.constants.Zero)) {\r\n              throw Error()\r\n            }\r\n            dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\r\n          }\r\n        } catch {\r\n          setIndependentError(t('insufficientLiquidity'))\r\n        }\r\n        return () => {\r\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\r\n        }\r\n      }\r\n    }\r\n  }, [\r\n    independentValueParsed,\r\n    swapType,\r\n    outputReserveETH,\r\n    outputReserveToken,\r\n    inputReserveETH,\r\n    inputReserveToken,\r\n    independentField,\r\n    t\r\n  ])\r\n\r\n  const [inverted, setInverted] = useState(false)\r\n  const exchangeRate = getExchangeRate(inputValueParsed, inputDecimals, outputValueParsed, outputDecimals)\r\n  const exchangeRateInverted = getExchangeRate(inputValueParsed, inputDecimals, outputValueParsed, outputDecimals, true)\r\n\r\n  const marketRate = getMarketRate(\r\n    swapType,\r\n    inputReserveETH,\r\n    inputReserveToken,\r\n    inputDecimals,\r\n    outputReserveETH,\r\n    outputReserveToken,\r\n    outputDecimals\r\n  )\r\n\r\n  const percentSlippage =\r\n    exchangeRate && marketRate\r\n      ? exchangeRate\r\n          .sub(marketRate)\r\n          .abs()\r\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\r\n          .div(marketRate)\r\n          .sub(ethers.utils.bigNumberify(3).mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(15))))\r\n      : undefined\r\n  const percentSlippageFormatted = percentSlippage && amountFormatter(percentSlippage, 16, 2)\r\n  const slippageWarning =\r\n    percentSlippage &&\r\n    percentSlippage.gte(ethers.utils.parseEther('.05')) &&\r\n    percentSlippage.lt(ethers.utils.parseEther('.2')) // [5% - 20%)\r\n  const highSlippageWarning = percentSlippage && percentSlippage.gte(ethers.utils.parseEther('.2')) // [20+%\r\n\r\n  const isValid = exchangeRate && inputError === null && independentError === null && recipientError === null\r\n\r\n  const estimatedText = `(${t('estimated')})`\r\n  function formatBalance(value) {\r\n    return `Balance: ${value}`\r\n  }\r\n\r\n  function renderTransactionDetails() {\r\n    ReactGA.event({\r\n      category: 'TransactionDetail',\r\n      action: 'Open'\r\n    })\r\n\r\n    const b = text => <BlueSpan>{text}</BlueSpan>\r\n\r\n    if (independentField === INPUT) {\r\n      return (\r\n        <div>\r\n          <div>\r\n            {t('youAreSelling')}{' '}\r\n            {b(\r\n              `${amountFormatter(\r\n                independentValueParsed,\r\n                independentDecimals,\r\n                Math.min(4, independentDecimals)\r\n              )} ${inputSymbol}`\r\n            )}\r\n            .\r\n          </div>\r\n          <LastSummaryText>\r\n            {b(recipient.address)} {t('willReceive')}{' '}\r\n            {b(\r\n              `${amountFormatter(\r\n                dependentValueMinumum,\r\n                dependentDecimals,\r\n                Math.min(4, dependentDecimals)\r\n              )} ${outputSymbol}`\r\n            )}{' '}\r\n            {t('orTransFail')}\r\n          </LastSummaryText>\r\n          <LastSummaryText>\r\n            {(slippageWarning || highSlippageWarning) && (\r\n              <span role=\"img\" aria-label=\"warning\">\r\n                ⚠️\r\n              </span>\r\n            )}\r\n            {t('priceChange')} {b(`${percentSlippageFormatted}%`)}.\r\n          </LastSummaryText>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div>\r\n          <div>\r\n            {t('youAreSending')}{' '}\r\n            {b(\r\n              `${amountFormatter(\r\n                independentValueParsed,\r\n                independentDecimals,\r\n                Math.min(4, independentDecimals)\r\n              )} ${outputSymbol}`\r\n            )}{' '}\r\n            {t('to')} {b(recipient.address)}.\r\n          </div>\r\n          <LastSummaryText>\r\n            {t('itWillCost')}{' '}\r\n            {b(\r\n              `${amountFormatter(\r\n                dependentValueMaximum,\r\n                dependentDecimals,\r\n                Math.min(4, dependentDecimals)\r\n              )} ${inputSymbol}`\r\n            )}{' '}\r\n            {t('orTransFail')}\r\n          </LastSummaryText>\r\n          <LastSummaryText>\r\n            {t('priceChange')} {b(`${percentSlippageFormatted}%`)}.\r\n          </LastSummaryText>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  function renderSummary() {\r\n    let contextualInfo = ''\r\n    let isError = false\r\n\r\n    if (inputError || independentError) {\r\n      contextualInfo = inputError || independentError\r\n      isError = true\r\n    } else if (!inputCurrency || !outputCurrency) {\r\n      contextualInfo = t('selectTokenCont')\r\n    } else if (!independentValue) {\r\n      contextualInfo = t('enterValueCont')\r\n    } else if (!recipient.address) {\r\n      contextualInfo = t('noRecipient')\r\n    } else if (!isAddress(recipient.address)) {\r\n      contextualInfo = t('invalidRecipient')\r\n    } else if (!account) {\r\n      contextualInfo = t('noWallet')\r\n      isError = true\r\n    }\r\n\r\n    const slippageWarningText = highSlippageWarning\r\n      ? t('highSlippageWarning')\r\n      : slippageWarning\r\n      ? t('slippageWarning')\r\n      : ''\r\n\r\n    return (\r\n      <NewContextualInfo\r\n        openDetailsText={t('transactionDetails')}\r\n        closeDetailsText={t('hideDetails')}\r\n        contextualInfo={contextualInfo ? contextualInfo : slippageWarningText}\r\n        allowExpand={!!(inputCurrency && outputCurrency && inputValueParsed && outputValueParsed && recipient.address)}\r\n        isError={isError}\r\n        slippageWarning={slippageWarning && slippageWarningText}\r\n        highSlippageWarning={highSlippageWarning && slippageWarningText}\r\n        renderTransactionDetails={renderTransactionDetails}\r\n      />\r\n    )\r\n  }\r\n\r\n  async function onSwap() {\r\n    const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW\r\n\r\n    let estimate, method, args, value\r\n    if (independentField === INPUT) {\r\n      ReactGA.event({\r\n        category: `${swapType}`,\r\n        action: 'TransferInput'\r\n      })\r\n\r\n      if (swapType === ETH_TO_TOKEN) {\r\n        estimate = contract.estimate.ethToTokenTransferInput\r\n        method = contract.ethToTokenTransferInput\r\n        args = [dependentValueMinumum, deadline, recipient.address]\r\n        value = independentValueParsed\r\n      } else if (swapType === TOKEN_TO_ETH) {\r\n        estimate = contract.estimate.tokenToEthTransferInput\r\n        method = contract.tokenToEthTransferInput\r\n        args = [independentValueParsed, dependentValueMinumum, deadline, recipient.address]\r\n        value = ethers.constants.Zero\r\n      } else if (swapType === TOKEN_TO_TOKEN) {\r\n        estimate = contract.estimate.tokenToTokenTransferInput\r\n        method = contract.tokenToTokenTransferInput\r\n        args = [\r\n          independentValueParsed,\r\n          dependentValueMinumum,\r\n          ethers.constants.One,\r\n          deadline,\r\n          recipient.address,\r\n          outputCurrency\r\n        ]\r\n        value = ethers.constants.Zero\r\n      }\r\n    } else if (independentField === OUTPUT) {\r\n      ReactGA.event({\r\n        category: `${swapType}`,\r\n        action: 'TransferOutput'\r\n      })\r\n\r\n      if (swapType === ETH_TO_TOKEN) {\r\n        estimate = contract.estimate.ethToTokenTransferOutput\r\n        method = contract.ethToTokenTransferOutput\r\n        args = [independentValueParsed, deadline, recipient.address]\r\n        value = dependentValueMaximum\r\n      } else if (swapType === TOKEN_TO_ETH) {\r\n        estimate = contract.estimate.tokenToEthTransferOutput\r\n        method = contract.tokenToEthTransferOutput\r\n        args = [independentValueParsed, dependentValueMaximum, deadline, recipient.address]\r\n        value = ethers.constants.Zero\r\n      } else if (swapType === TOKEN_TO_TOKEN) {\r\n        estimate = contract.estimate.tokenToTokenTransferOutput\r\n        method = contract.tokenToTokenTransferOutput\r\n        args = [\r\n          independentValueParsed,\r\n          dependentValueMaximum,\r\n          ethers.constants.MaxUint256,\r\n          deadline,\r\n          recipient.address,\r\n          outputCurrency\r\n        ]\r\n        value = ethers.constants.Zero\r\n      }\r\n    }\r\n\r\n    const estimatedGasLimit = await estimate(...args, { value })\r\n    method(...args, { value, gasLimit: calculateGasMargin(estimatedGasLimit, GAS_MARGIN) }).then(response => {\r\n      addTransaction(response)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CurrencyInputPanel\r\n        title={t('input')}\r\n        description={inputValueFormatted && independentField === OUTPUT ? estimatedText : ''}\r\n        extraText={inputBalanceFormatted && formatBalance(inputBalanceFormatted)}\r\n        extraTextClickHander={() => {\r\n          if (inputBalance && inputDecimals) {\r\n            const valueToSet = inputCurrency === 'ETH' ? inputBalance.sub(ethers.utils.parseEther('.1')) : inputBalance\r\n            if (valueToSet.gt(ethers.constants.Zero)) {\r\n              dispatchSwapState({\r\n                type: 'UPDATE_INDEPENDENT',\r\n                payload: { value: amountFormatter(valueToSet, inputDecimals, inputDecimals, false), field: INPUT }\r\n              })\r\n            }\r\n          }\r\n        }}\r\n        onCurrencySelected={inputCurrency => {\r\n          dispatchSwapState({ type: 'SELECT_CURRENCY', payload: { currency: inputCurrency, field: INPUT } })\r\n        }}\r\n        onValueChange={inputValue => {\r\n          dispatchSwapState({ type: 'UPDATE_INDEPENDENT', payload: { value: inputValue, field: INPUT } })\r\n        }}\r\n        showUnlock={showUnlock}\r\n        selectedTokens={[inputCurrency, outputCurrency]}\r\n        selectedTokenAddress={inputCurrency}\r\n        value={inputValueFormatted}\r\n        errorMessage={inputError ? inputError : independentField === INPUT ? independentError : ''}\r\n      />\r\n      <OversizedPanel>\r\n        <DownArrowBackground>\r\n          <DownArrow\r\n            onClick={() => {\r\n              dispatchSwapState({ type: 'FLIP_INDEPENDENT' })\r\n            }}\r\n            clickable\r\n            alt=\"swap\"\r\n            src={isValid ? ArrowDownBlue : ArrowDownGrey}\r\n          />\r\n        </DownArrowBackground>\r\n      </OversizedPanel>\r\n      <CurrencyInputPanel\r\n        title={t('output')}\r\n        description={outputValueFormatted && independentField === INPUT ? estimatedText : ''}\r\n        extraText={outputBalanceFormatted && formatBalance(outputBalanceFormatted)}\r\n        onCurrencySelected={outputCurrency => {\r\n          dispatchSwapState({ type: 'SELECT_CURRENCY', payload: { currency: outputCurrency, field: OUTPUT } })\r\n        }}\r\n        onValueChange={outputValue => {\r\n          dispatchSwapState({ type: 'UPDATE_INDEPENDENT', payload: { value: outputValue, field: OUTPUT } })\r\n        }}\r\n        selectedTokens={[inputCurrency, outputCurrency]}\r\n        selectedTokenAddress={outputCurrency}\r\n        value={outputValueFormatted}\r\n        errorMessage={independentField === OUTPUT ? independentError : ''}\r\n        disableUnlock\r\n      />\r\n      <OversizedPanel>\r\n        <DownArrowBackground>\r\n          <DownArrow src={isValid ? ArrowDownBlue : ArrowDownGrey} alt=\"arrow\" />\r\n        </DownArrowBackground>\r\n      </OversizedPanel>\r\n      <AddressInputPanel onChange={setRecipient} onError={setRecipientError} />\r\n      <OversizedPanel hideBottom>\r\n        <ExchangeRateWrapper\r\n          onClick={() => {\r\n            setInverted(inverted => !inverted)\r\n          }}\r\n        >\r\n          <ExchangeRate>{t('exchangeRate')}</ExchangeRate>\r\n          {inverted ? (\r\n            <span>\r\n              {exchangeRate\r\n                ? `1 ${outputSymbol} = ${amountFormatter(exchangeRateInverted, 18, 4, false)} ${inputSymbol}`\r\n                : ' - '}\r\n            </span>\r\n          ) : (\r\n            <span>\r\n              {exchangeRate\r\n                ? `1 ${inputSymbol} = ${amountFormatter(exchangeRate, 18, 4, false)} ${outputSymbol}`\r\n                : ' - '}\r\n            </span>\r\n          )}\r\n        </ExchangeRateWrapper>\r\n      </OversizedPanel>\r\n      {renderSummary()}\r\n      <Flex>\r\n        <Button disabled={!isValid} onClick={onSwap} warning={highSlippageWarning}>\r\n          {highSlippageWarning ? t('sendAnyway') : t('send')}\r\n        </Button>\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n"],"sourceRoot":""}