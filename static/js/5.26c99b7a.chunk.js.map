{"version":3,"sources":["assets/images/arrow-down-blue.svg","assets/images/arrow-down-grey.svg","components/ContextualInfo/index.js","assets/images/dropup-blue.svg","pages/Pool/RemoveLiquidity.js"],"names":["module","exports","__webpack_require__","p","SummaryWrapper","styled","div","_templateObject","_ref","error","theme","salmonRed","doveGray","Details","_templateObject2","_ref2","concreteGray","SummaryWrapperContainer","_templateObject3","_ref3","flexRowNoWrap","_ref4","royalBlue","ContextualInfo","state","showDetails","this","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","props","renderTransactionDetails","_this2","_this$props","openDetailsText","closeDetailsText","contextualInfo","isError","Fragment","onClick","setState","prevState","src","DropupBlue","alt","DropdownBlue","renderDetails","Component","defaultProps","ALLOWED_SLIPPAGE","ethers","utils","bigNumberify","DEADLINE_FROM_NOW","GAS_MARGIN","BlueSpan","span","DownArrowBackground","DownArrow","img","RemoveLiquidityOutput","_templateObject4","RemoveLiquidityOutputText","_templateObject5","RemoveLiquidityOutputPlus","_templateObject6","SummaryPanel","_templateObject7","flexColumnNoWrap","LastSummaryText","_templateObject8","ExchangeRateWrapper","_templateObject9","_ref5","_ref6","ExchangeRate","_templateObject10","_ref7","chaliceGray","Flex","_templateObject11","getMarketRate","reserveETH","reserveToken","decimals","inputValue","inputDecimals","outputValue","outputDecimals","invert","arguments","length","undefined","factor","pow","mul","_unused","getExchangeRate","calculateSlippageBounds","value","offset","minimum","sub","maximum","add","lt","constants","Zero","gt","MaxUint256","RemoveLiquidity","_useWeb3Context","useWeb3Context","library","account","active","t","useTranslation","addTransaction","useTransactionAdder","_useState","useState","_useState2","Object","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","outputCurrency","setOutputCurrency","_useState3","_useState4","setValue","_useState5","_useState6","inputError","setInputError","_useState7","_useState8","valueParsed","setValueParsed","useEffect","parsedValue","parseUnits","_unused2","_useTokenDetails","useTokenDetails","symbol","exchangeAddress","_useState9","_useState10","totalPoolTokens","setTotalPoolTokens","poolTokenBalance","useAddressBalance","exchangeETHBalance","exchangeTokenBalance","exchange","useExchangeContract","ownershipPercentage","isZero","ownershipPercentageFormatted","amountFormatter","ETHOwnShare","TokenOwnShare","ETHPer","tokenPer","ethWithdrawn","tokenWithdrawn","ethWithdrawnMin","tokenWithdrawnMin","fetchPoolTokens","useCallback","totalSupply","then","_onRemoveLiquidity","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_mnt_c_Code_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","deadline","estimatedGasLimit","wrap","_context","prev","next","ReactGA","event","category","action","Math","ceil","Date","now","estimate","removeLiquidity","sent","gasLimit","calculateGasMargin","response","stop","apply","on","removeListener","b","text","react__WEBPACK_IMPORTED_MODULE_4___default","concat","min","isActive","isValid","marketRate","_components_CurrencyInputPanel__WEBPACK_IMPORTED_MODULE_11__","title","extraText","formatBalance","extraTextClickHander","valueToSet","onCurrencySelected","onValueChange","errorMessage","selectedTokenAddress","_components_OversizedPanel__WEBPACK_IMPORTED_MODULE_13__","ArrowDownBlue","ArrowDownGrey","description","key","renderInput","disableTokenSelect","disableUnlock","hideBottom","_components_ContextualInfo__WEBPACK_IMPORTED_MODULE_12__","renderSummary","_theme__WEBPACK_IMPORTED_MODULE_10__","disabled"],"mappings":"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","file":"static/js/5.26c99b7a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/arrow-down-blue.114fab91.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-down-grey.4d4a6a99.svg\";","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styled from 'styled-components'\r\n\r\nimport DropdownBlue from '../../assets/images/dropdown-blue.svg'\r\nimport DropupBlue from '../../assets/images/dropup-blue.svg'\r\n\r\nconst SummaryWrapper = styled.div`\r\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.doveGray)};\r\n  font-size: 0.75rem;\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n  padding-top: 1rem;\r\n`\r\n\r\nconst Details = styled.div`\r\n  background-color: ${({ theme }) => theme.concreteGray};\r\n  padding: 1.5rem;\r\n  border-radius: 1rem;\r\n  font-size: 0.75rem;\r\n  margin-top: 1rem;\r\n`\r\n\r\nconst SummaryWrapperContainer = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  color: ${({ theme }) => theme.royalBlue};\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n  padding-top: 1rem;\r\n  cursor: pointer;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 0.75rem;\r\n\r\n  span {\r\n    margin-right: 12px;\r\n  }\r\n\r\n  img {\r\n    height: 0.75rem;\r\n    width: 0.75rem;\r\n  }\r\n`\r\n\r\nclass ContextualInfo extends Component {\r\n  static propTypes = {\r\n    openDetailsText: PropTypes.string,\r\n    renderTransactionDetails: PropTypes.func,\r\n    contextualInfo: PropTypes.string,\r\n    isError: PropTypes.bool\r\n  }\r\n\r\n  static defaultProps = {\r\n    openDetailsText: 'Transaction Details',\r\n    closeDetailsText: 'Hide Details',\r\n    renderTransactionDetails() {},\r\n    contextualInfo: '',\r\n    isError: false\r\n  }\r\n\r\n  state = {\r\n    showDetails: false\r\n  }\r\n\r\n  renderDetails() {\r\n    if (!this.state.showDetails) {\r\n      return null\r\n    }\r\n\r\n    return <Details>{this.props.renderTransactionDetails()}</Details>\r\n  }\r\n\r\n  render() {\r\n    const { openDetailsText, closeDetailsText, contextualInfo, isError } = this.props\r\n\r\n    if (contextualInfo) {\r\n      return <SummaryWrapper error={isError}>{contextualInfo}</SummaryWrapper>\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <SummaryWrapperContainer\r\n          onClick={() =>\r\n            this.setState(prevState => {\r\n              return { showDetails: !prevState.showDetails }\r\n            })\r\n          }\r\n        >\r\n          {!this.state.showDetails ? (\r\n            <>\r\n              <span>{openDetailsText}</span>\r\n              <img src={DropdownBlue} alt=\"dropdown\" />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <span>{closeDetailsText}</span>\r\n              <img src={DropupBlue} alt=\"dropup\" />\r\n            </>\r\n          )}\r\n        </SummaryWrapperContainer>\r\n        {this.renderDetails()}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ContextualInfo\r\n","module.exports = __webpack_public_path__ + \"static/media/dropup-blue.345dad74.svg\";","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport ReactGA from 'react-ga'\r\nimport { useWeb3Context } from 'web3-react'\r\nimport { ethers } from 'ethers'\r\nimport styled from 'styled-components'\r\n\r\nimport { Button } from '../../theme'\r\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\r\nimport ContextualInfo from '../../components/ContextualInfo'\r\nimport OversizedPanel from '../../components/OversizedPanel'\r\nimport ArrowDownBlue from '../../assets/images/arrow-down-blue.svg'\r\nimport ArrowDownGrey from '../../assets/images/arrow-down-grey.svg'\r\nimport { useExchangeContract } from '../../hooks'\r\nimport { useTransactionAdder } from '../../contexts/Transactions'\r\nimport { useTokenDetails } from '../../contexts/Tokens'\r\nimport { useAddressBalance } from '../../contexts/Balances'\r\nimport { calculateGasMargin, amountFormatter } from '../../utils'\r\n\r\n// denominated in bips\r\nconst ALLOWED_SLIPPAGE = ethers.utils.bigNumberify(200)\r\n\r\n// denominated in seconds\r\nconst DEADLINE_FROM_NOW = 60 * 15\r\n\r\n// denominated in bips\r\nconst GAS_MARGIN = ethers.utils.bigNumberify(1000)\r\n\r\nconst BlueSpan = styled.span`\r\n  color: ${({ theme }) => theme.royalBlue};\r\n`\r\n\r\nconst DownArrowBackground = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nconst DownArrow = styled.img`\r\n  width: 0.625rem;\r\n  height: 0.625rem;\r\n  position: relative;\r\n  padding: 0.875rem;\r\n`\r\n\r\nconst RemoveLiquidityOutput = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  min-height: 3.5rem;\r\n`\r\n\r\nconst RemoveLiquidityOutputText = styled.div`\r\n  font-size: 1.25rem;\r\n  line-height: 1.5rem;\r\n  padding: 1rem 0.75rem;\r\n`\r\n\r\nconst RemoveLiquidityOutputPlus = styled.div`\r\n  font-size: 1.25rem;\r\n  line-height: 1.5rem;\r\n  padding: 1rem 0;\r\n`\r\n\r\nconst SummaryPanel = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap}\r\n  padding: 1rem 0;\r\n`\r\n\r\nconst LastSummaryText = styled.div`\r\n  margin-top: 1rem;\r\n`\r\n\r\nconst ExchangeRateWrapper = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.doveGray};\r\n  font-size: 0.75rem;\r\n  padding: 0.25rem 1rem 0;\r\n`\r\n\r\nconst ExchangeRate = styled.span`\r\n  flex: 1 1 auto;\r\n  width: 0;\r\n  color: ${({ theme }) => theme.chaliceGray};\r\n`\r\n\r\nconst Flex = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 2rem;\r\n\r\n  button {\r\n    max-width: 20rem;\r\n  }\r\n`\r\n\r\nfunction getExchangeRate(inputValue, inputDecimals, outputValue, outputDecimals, invert = false) {\r\n  try {\r\n    if (\r\n      inputValue &&\r\n      (inputDecimals || inputDecimals === 0) &&\r\n      outputValue &&\r\n      (outputDecimals || outputDecimals === 0)\r\n    ) {\r\n      const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\r\n\r\n      if (invert) {\r\n        return inputValue\r\n          .mul(factor)\r\n          .div(outputValue)\r\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\r\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\r\n      } else {\r\n        return outputValue\r\n          .mul(factor)\r\n          .div(inputValue)\r\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\r\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\r\n      }\r\n    }\r\n  } catch {}\r\n}\r\n\r\nfunction getMarketRate(reserveETH, reserveToken, decimals, invert = false) {\r\n  return getExchangeRate(reserveETH, 18, reserveToken, decimals, invert)\r\n}\r\n\r\nfunction calculateSlippageBounds(value) {\r\n  if (value) {\r\n    const offset = value.mul(ALLOWED_SLIPPAGE).div(ethers.utils.bigNumberify(10000))\r\n    const minimum = value.sub(offset)\r\n    const maximum = value.add(offset)\r\n    return {\r\n      minimum: minimum.lt(ethers.constants.Zero) ? ethers.constants.Zero : minimum,\r\n      maximum: maximum.gt(ethers.constants.MaxUint256) ? ethers.constants.MaxUint256 : maximum\r\n    }\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n\r\nexport default function RemoveLiquidity() {\r\n  const { library, account, active } = useWeb3Context()\r\n  const { t } = useTranslation()\r\n\r\n  const addTransaction = useTransactionAdder()\r\n\r\n  const [outputCurrency, setOutputCurrency] = useState('')\r\n  const [value, setValue] = useState('')\r\n  const [inputError, setInputError] = useState()\r\n  const [valueParsed, setValueParsed] = useState()\r\n  // parse value\r\n  useEffect(() => {\r\n    try {\r\n      const parsedValue = ethers.utils.parseUnits(value, 18)\r\n      setValueParsed(parsedValue)\r\n    } catch {\r\n      if (value !== '') {\r\n        setInputError(t('inputNotValid'))\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      setInputError()\r\n      setValueParsed()\r\n    }\r\n  }, [t, value])\r\n\r\n  const { symbol, decimals, exchangeAddress } = useTokenDetails(outputCurrency)\r\n\r\n  const [totalPoolTokens, setTotalPoolTokens] = useState()\r\n  const poolTokenBalance = useAddressBalance(account, exchangeAddress)\r\n  const exchangeETHBalance = useAddressBalance(exchangeAddress, 'ETH')\r\n  const exchangeTokenBalance = useAddressBalance(exchangeAddress, outputCurrency)\r\n\r\n  // input validation\r\n  useEffect(() => {\r\n    if (valueParsed && poolTokenBalance) {\r\n      if (valueParsed.gt(poolTokenBalance)) {\r\n        setInputError(t('insufficientBalance'))\r\n      } else {\r\n        setInputError(null)\r\n      }\r\n    }\r\n  }, [poolTokenBalance, t, valueParsed])\r\n\r\n  const exchange = useExchangeContract(exchangeAddress)\r\n\r\n  const ownershipPercentage =\r\n    poolTokenBalance && totalPoolTokens && !totalPoolTokens.isZero()\r\n      ? poolTokenBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))).div(totalPoolTokens)\r\n      : undefined\r\n  const ownershipPercentageFormatted = ownershipPercentage && amountFormatter(ownershipPercentage, 16, 4)\r\n\r\n  const ETHOwnShare =\r\n    exchangeETHBalance &&\r\n    ownershipPercentage &&\r\n    exchangeETHBalance.mul(ownershipPercentage).div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\r\n  const TokenOwnShare =\r\n    exchangeTokenBalance &&\r\n    ownershipPercentage &&\r\n    exchangeTokenBalance.mul(ownershipPercentage).div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\r\n\r\n  const ETHPer =\r\n    exchangeETHBalance && totalPoolTokens && !totalPoolTokens.isZero()\r\n      ? exchangeETHBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))).div(totalPoolTokens)\r\n      : undefined\r\n  const tokenPer =\r\n    exchangeTokenBalance && totalPoolTokens && !totalPoolTokens.isZero()\r\n      ? exchangeTokenBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))).div(totalPoolTokens)\r\n      : undefined\r\n\r\n  const ethWithdrawn =\r\n    ETHPer && valueParsed\r\n      ? ETHPer.mul(valueParsed).div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\r\n      : undefined\r\n  const tokenWithdrawn =\r\n    tokenPer && valueParsed\r\n      ? tokenPer.mul(valueParsed).div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\r\n      : undefined\r\n\r\n  const ethWithdrawnMin = ethWithdrawn ? calculateSlippageBounds(ethWithdrawn).minimum : undefined\r\n  const tokenWithdrawnMin = tokenWithdrawn ? calculateSlippageBounds(tokenWithdrawn).minimum : undefined\r\n\r\n  const fetchPoolTokens = useCallback(() => {\r\n    if (exchange) {\r\n      exchange.totalSupply().then(totalSupply => {\r\n        setTotalPoolTokens(totalSupply)\r\n      })\r\n    }\r\n  }, [exchange])\r\n  useEffect(() => {\r\n    fetchPoolTokens()\r\n    library.on('block', fetchPoolTokens)\r\n\r\n    return () => {\r\n      library.removeListener('block', fetchPoolTokens)\r\n    }\r\n  }, [fetchPoolTokens, library])\r\n\r\n  async function onRemoveLiquidity() {\r\n    ReactGA.event({\r\n      category: 'Pool',\r\n      action: 'RemoveLiquidity'\r\n    })\r\n\r\n    const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW\r\n\r\n    const estimatedGasLimit = await exchange.estimate.removeLiquidity(\r\n      valueParsed,\r\n      ethWithdrawnMin,\r\n      tokenWithdrawnMin,\r\n      deadline\r\n    )\r\n\r\n    exchange\r\n      .removeLiquidity(valueParsed, ethWithdrawnMin, tokenWithdrawnMin, deadline, {\r\n        gasLimit: calculateGasMargin(estimatedGasLimit, GAS_MARGIN)\r\n      })\r\n      .then(response => {\r\n        addTransaction(response)\r\n      })\r\n  }\r\n\r\n  const b = text => <BlueSpan>{text}</BlueSpan>\r\n\r\n  function renderTransactionDetails() {\r\n    ReactGA.event({\r\n      category: 'TransactionDetail',\r\n      action: 'Open'\r\n    })\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          {t('youAreRemoving')} {b(`${amountFormatter(ethWithdrawn, 18, 4)} ETH`)} {t('and')}{' '}\r\n          {b(`${amountFormatter(tokenWithdrawn, decimals, Math.min(decimals, 4))} ${symbol}`)} {t('outPool')}\r\n        </div>\r\n        <LastSummaryText>\r\n          {t('youWillRemove')} {b(amountFormatter(valueParsed, 18, 4))} {t('liquidityTokens')}\r\n        </LastSummaryText>\r\n        <LastSummaryText>\r\n          {t('totalSupplyIs')} {b(amountFormatter(totalPoolTokens, 18, 4))}\r\n        </LastSummaryText>\r\n        <LastSummaryText>\r\n          {t('tokenWorth')} {b(amountFormatter(ETHPer, 18, 4))} ETH {t('and')}{' '}\r\n          {b(amountFormatter(tokenPer, decimals, Math.min(4, decimals)))} {symbol}\r\n        </LastSummaryText>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  function renderSummary() {\r\n    let contextualInfo = ''\r\n    let isError = false\r\n\r\n    if (inputError) {\r\n      contextualInfo = inputError\r\n      isError = true\r\n    } else if (!outputCurrency || outputCurrency === 'ETH') {\r\n      contextualInfo = t('selectTokenCont')\r\n    } else if (!valueParsed) {\r\n      contextualInfo = t('enterValueCont')\r\n    } else if (!account) {\r\n      contextualInfo = t('noWallet')\r\n      isError = true\r\n    }\r\n\r\n    return (\r\n      <ContextualInfo\r\n        key=\"context-info\"\r\n        openDetailsText={t('transactionDetails')}\r\n        closeDetailsText={t('hideDetails')}\r\n        contextualInfo={contextualInfo}\r\n        isError={isError}\r\n        renderTransactionDetails={renderTransactionDetails}\r\n      />\r\n    )\r\n  }\r\n\r\n  function formatBalance(value) {\r\n    return `Balance: ${value}`\r\n  }\r\n\r\n  const isActive = active && account\r\n  const isValid = inputError === null\r\n\r\n  const marketRate = getMarketRate(exchangeETHBalance, exchangeTokenBalance, decimals)\r\n\r\n  return (\r\n    <>\r\n      <CurrencyInputPanel\r\n        title={t('poolTokens')}\r\n        extraText={poolTokenBalance && formatBalance(amountFormatter(poolTokenBalance, 18, 4))}\r\n        extraTextClickHander={() => {\r\n          if (poolTokenBalance) {\r\n            const valueToSet = poolTokenBalance\r\n            if (valueToSet.gt(ethers.constants.Zero)) {\r\n              setValue(amountFormatter(valueToSet, 18, 18, false))\r\n            }\r\n          }\r\n        }}\r\n        onCurrencySelected={setOutputCurrency}\r\n        onValueChange={setValue}\r\n        value={value}\r\n        errorMessage={inputError}\r\n        selectedTokenAddress={outputCurrency}\r\n      />\r\n      <OversizedPanel>\r\n        <DownArrowBackground>\r\n          <DownArrow src={isActive ? ArrowDownBlue : ArrowDownGrey} alt=\"arrow\" />\r\n        </DownArrowBackground>\r\n      </OversizedPanel>\r\n      <CurrencyInputPanel\r\n        title={t('output')}\r\n        description={!!(ethWithdrawn && tokenWithdrawn) ? `(${t('estimated')})` : ''}\r\n        key=\"remove-liquidity-input\"\r\n        renderInput={() =>\r\n          !!(ethWithdrawn && tokenWithdrawn) ? (\r\n            <RemoveLiquidityOutput>\r\n              <RemoveLiquidityOutputText>\r\n                {`${amountFormatter(ethWithdrawn, 18, 4, false)} ETH`}\r\n              </RemoveLiquidityOutputText>\r\n              <RemoveLiquidityOutputPlus> + </RemoveLiquidityOutputPlus>\r\n              <RemoveLiquidityOutputText>\r\n                {`${amountFormatter(tokenWithdrawn, decimals, Math.min(4, decimals))} ${symbol}`}\r\n              </RemoveLiquidityOutputText>\r\n            </RemoveLiquidityOutput>\r\n          ) : (\r\n            <RemoveLiquidityOutput />\r\n          )\r\n        }\r\n        disableTokenSelect\r\n        disableUnlock\r\n      />\r\n      <OversizedPanel key=\"remove-liquidity-input-under\" hideBottom>\r\n        <SummaryPanel>\r\n          <ExchangeRateWrapper>\r\n            <ExchangeRate>{t('exchangeRate')}</ExchangeRate>\r\n            {marketRate ? <span>{`1 ETH = ${amountFormatter(marketRate, 18, 4)} ${symbol}`}</span> : ' - '}\r\n          </ExchangeRateWrapper>\r\n          <ExchangeRateWrapper>\r\n            <ExchangeRate>{t('currentPoolSize')}</ExchangeRate>\r\n            {exchangeETHBalance && exchangeTokenBalance && decimals ? (\r\n              <span>{`${amountFormatter(exchangeETHBalance, 18, 4)} ETH + ${amountFormatter(\r\n                exchangeTokenBalance,\r\n                decimals,\r\n                Math.min(decimals, 4)\r\n              )} ${symbol}`}</span>\r\n            ) : (\r\n              ' - '\r\n            )}\r\n          </ExchangeRateWrapper>\r\n          <ExchangeRateWrapper>\r\n            <ExchangeRate>\r\n              {t('yourPoolShare')} ({ownershipPercentageFormatted && ownershipPercentageFormatted}%)\r\n            </ExchangeRate>\r\n            {ETHOwnShare && TokenOwnShare ? (\r\n              <span>\r\n                {`${amountFormatter(ETHOwnShare, 18, 4)} ETH + ${amountFormatter(\r\n                  TokenOwnShare,\r\n                  decimals,\r\n                  Math.min(decimals, 4)\r\n                )} ${symbol}`}\r\n              </span>\r\n            ) : (\r\n              ' - '\r\n            )}\r\n          </ExchangeRateWrapper>\r\n        </SummaryPanel>\r\n      </OversizedPanel>\r\n      {renderSummary()}\r\n      <Flex>\r\n        <Button disabled={!isValid} onClick={onRemoveLiquidity}>\r\n          {t('removeLiquidity')}\r\n        </Button>\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n"],"sourceRoot":""}